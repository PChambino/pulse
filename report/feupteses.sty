%% FEUP THESIS STYLE for LaTeX2e
%% FEUP, JCL & JCF, 31 July 2011
%%
%% PLEASE send improvements to jlopes at fe.up.pt and to jcf at fe.up.pt
%%
  
\NeedsTeXFormat{LaTeX2e}
\def \filename {feupteses.sty}
\def \filedate {2011/07/31}
\def \fileversion {1.0}
\ProvidesPackage {feupteses}[\filedate\space\fileversion\space]
\typeout {Document Style `FEUP Teses' \fileversion\space <\filedate>}

%% Option for Portuguese
\newif\if@portugues
\@portuguesfalse
\DeclareOption{portugues}{\@portuguestrue}

%% Option mieec
\newif\if@mieec
\@mieecfalse
\DeclareOption{mieec}{\@mieectrue}

%% Option mieic
\newif\if@mieic
\@mieicfalse
\DeclareOption{mieic}{\@mieictrue}

%% Option juri
\newif\if@juri
\@jurifalse
\DeclareOption{juri}{\@juritrue}

%% Option final
\newif\if@final
\@finalfalse
\DeclareOption{final}{\@finaltrue}

%% Option backrefs
\newif\if@backrefs
\@backrefsfalse
\DeclareOption{backrefs}{\@backrefstrue}

%% Option for print on paper
\newif\if@onpaper
\@onpaperfalse
\DeclareOption{onpaper}{\@onpapertrue}

%% Option for numeric references (citation order)
\newif\if@numericrefs
\@numericrefsfalse
%\DeclareOption{numericrefs}{\@numericrefstrue}

%% Option for alpha references
\newif\if@alpharefs
\@alpharefsfalse
%\DeclareOption{alpharefs}{\@alpharefstrue}

%% Internal option: page headers are centered
\newif\if@headerscentered
\@headerscenteredfalse

%% Internal option: use watermark for first page
\newif\if@watermark
\@watermarkfalse

%% Internal option: committeepage
\newif\if@committeepage
\@committeepagefalse

%% Internal option: provisional
\newif\if@provisional
\@provisionalfalse

%% Internal: uselineno
\newif\if@uselineno
\@uselinenofalse

\ProcessOptions\relax

%% Process internal options

\if@final
  \relax
\else
   \if@juri
     \relax
   \else
     \@provisionaltrue
    \fi
\fi

\if@juri
  \if@mieic
    \@watermarktrue
    \@uselinenotrue
  \fi
\fi

\if@mieec
  \relax
\else
  \@committeepagetrue
\fi

\if@mieic
  \@headerscenteredtrue
  \@numericrefsfalse
  \@alpharefstrue
\fi

\if@mieec
  \@numericrefstrue
  \@alpharefsfalse
\fi


%% Make sure that report has been loaded
\@ifundefined{chapter}{\@latexerr{The `feupteses' option should be used
with the `report' document style}{}}{}

\RequirePackage{ifpdf}
\ifpdf
  \relax
\else
  \@latexerr{The 'feupteses' package may only be used with
    pdflatex}{Please process this file with pdflatex.}
\fi

%% Disallow page breaks at hyphens (this will give some underfull vbox's,
%% so an alternative is to use \brokenpenalty=100 and manually search
%% for and fix such page breaks)
\brokenpenalty=9000
%\brokenpenalty=10000

%% Ensure correct font encoding
\RequirePackage[T1]{fontenc}

\if@portugues
  \RequirePackage[portuges]{babel}
\else
  \RequirePackage[english]{babel}
\fi

%% Global layout of the document

%% geometry package
\RequirePackage[outer=25mm,inner=35mm,vmargin=20mm,includehead,includefoot,headheight=15pt]{geometry}

%% avoid widows and orphans
\clubpenalty=6000
\widowpenalty=6000

\RequirePackage{mathptmx}	   % font times
\RequirePackage[scaled]{couriers}  % font courier
\RequirePackage[scaled]{helvet}    % font helvetica
\RequirePackage[pdftex]{graphicx}
\RequirePackage{url}
\RequirePackage{setspace}
\RequirePackage{makeidx}
\RequirePackage[tableposition=top]{caption}
\RequirePackage[pagewise,switch*]{lineno}
\modulolinenumbers[2]
\if@watermark
\RequirePackage[firstpage]{draftwatermark}
\fi

\if@numericrefs
  \newcommand{\citet}{\cite}
  \newcommand{\citep}{\cite}
\else
  \if@alpharefs 
     \newcommand{\citet}{\cite}
     \newcommand{\citep}{\cite}
  \else
     \RequirePackage[round]{natbib}
  \fi
\fi

%% Watermark
\if@watermark
  \SetWatermarkFontSize{72pt}
  \if@portugues
     \SetWatermarkText{Para Aprecia\c{c}\猃痫受觚蜷苠祗苡弭揍翦蝽狎朐屮酐骑术蝙碰犰踽糸镱苕苕ゥ腻骈铄犰翳痖邈弩翳狒顼镱翳糸綮疳珏犷翳泔眄轸翦屦徵瀹荇轸戾犷茚豸栾犰蝈徜屮轶茜溴孳荔汨镲禧漆沲熹徜溴蓬珏铊狎獒溽疹轹弪箝溽溴滹酗螋稞茕彐荏汨镲欤丙茜溴孳荔汨镲禧１茕彐莒镧铮丙茜溴孳漓镧稃１茜溴孳吏桢箝箐狒妍荇镤狴茕彐荇桢箝箐狒澹丙茜溴孳吏桢箝箐狒妍１ゥ涉秕狎珏趑轭赭溴珧邋蟋躞茚钿忮赭邋翳钺礤螽茜溴孳冷彗蝈妍絮亠躜腻珧邋桢蝈↓茕彐茕彗蝈澹丙茜溴孳冷彗蝈妍１茜溴孳鲤蝻鲩箝镱犰翦酐芾屙痿茕彐茚滗轸轱钺戽蝻铘翦簦丙茜溴孳鲤蝻鲩箝镱犰翦酐１ゥ湾礅弪镦翳泔眄轸翦鲩鲠茴鬻怙芾鲩鲠翦ゥ徜轭轸獒翦茕彐茔镯黹趑邋翦簦丙荏弭怙芾鲩鲠翦糗鲡秫芴狎珏茴镩钿孱１莛狎荟箅轲爱弟忉箦扉铄箅轲ゥ箝钽翳弪汜忮盹蝈翳犷镱礤礅弪镦翳泔眄轸翦瀣ゥ翳躞弪磲脲眭祠轲戾汜祆麸茔镯黹趑邋礤礅弪ゥ阵徵搴茔镯黹趑邋礤礅弪蝻戾钺礤糸綮妪ゥ徜礤礅弪茕彐茔镯黹趑邋礤礅弪１２荏弭怙芾鲩鲠翦糗鲡秫荃铞怙芾鲩鲠翦荟箅轲爱弟忉箦扉铄箅轲莛狎茴镩钿孱糗灬蜱１２ゥ徜扉铄骘箝珙狒躜茕彐荏殓钺趱蝈荏弭怙芾鲩鲠翦糗鲡秫荃铞怙芾鲩鲠翦荟箅轲曹忉箦扉铄箅轲荑骈祆茯蹯妍爱返莒轭鬻殇翳爱岔睚荟箅轲曹忉箦扉铄箅轲ゥ箝钽翳弪汜忮盹蝈翳犷镱篚疱蝣轶矧ゥ翳躞弪磲脲眭祠轲戾汜祆麸荏躔弪鲩箫ゥ阵徵搴荏躔弪鲩箫螓蝻戾钺礤糸綮妪茴鬻怙芾篚疱蝣轶矧篝屮茕彐荏躔弪鲩箫颍保阐荏弭怙芾篚疱蝣轶矧篝屮糗鲡秫荃铞怙芾篚疱蝣轶矧篝屮荟箅轲爱弟忉箦扉铄箅轲莛狎茔孱翦螓茴镩钿孱糗灬蜱１２ゥ罪螂轭鲥蝮轱荛胬痱秭轶轱钺荛胬黹邋荛胬痫螋蹒蹂茚滗轸轱钺戽蝻铘翦酐皱蝮荥猃溴趄徕犰栾苠祗茚滗轸轱钺戽蝻铘翦酐罪螂轭鲥蝮轱铨苕苕苕荛胬痱秭轶轱钺荛胬黹彘荛胬痫螋蹒蹂茚滗轸轱钺戽蝻铘翦酐皱蝮荥猃溴趄徕犰栾苠祗茚滗轸轱钺戽蝻铘翦酐罪螂轭鲥蝮轱铨苕苕苕ゥ骑术蝙碰犰踽糸镱荛胬牾蜷荛胬黹邋荛胬痫螋蹒蹂茚滗轸轱钺戽蝻铘翦酐嗅蜥琉蝈汩彳沱泯荥猃痫受觚蜷苠祗茚滗轸轱钺戽蝻铘翦酐骑术蝙碰犰踽糸镱苕苕苕ゥ骑骈钺鲥蝮轱荛胬骈钺茚滗轸轱钺戽蝻铘翦酐苕ゥ蔑瘗蜷玷趔ゥ溴骈铄疱蝽轶箝镱麸顼鏖翳泔瘗蜷玷茜溴孳鲤弪黹篌轱铥茴蹯忑茕彐莛弪黹篌轱睿丙茜溴孳鲤弪黹篌轱铥１ゥ溴骈铄泔瘗蜷玷纛雉殂鲠蜷徕戾犷轭轸獒扉轸茜溴孳楞镳蜷玷纛雉殂妍茕彐茔镳蜷玷纛雉殂澹丙茜溴孳楞镳蜷玷纛雉殂妍茔镳蜷玷糗１莛狎芾疱蝽轶箝镱ゥ乞镱疳珏茕彐茼犭弭轸戾茴鬻怙芾泸弩翕秫ゥ陨蕴疳珏茆彗轭糸綮屦徵妪荟箴徙妍钡眄芴狎珏茆荇屮趔沱芾筱栾镬荟箴徙濯舶眄茕彐茆狍屐轭弩趄弭汨碑昌苋蹒遘怄芾糸綮莛狎荟箅轲卑眄芴狎珏茆芾狨翳矧荛胬麽翦蝽狎茯屐狲苠祗荟箅轲卑眄芴狎珏荇屮趔芾痱秭轶轱钺祠屮酏苕荟骈祆荟骈祆荑怙麸荇屮赭殇翳荏弭怙芾泸弩翕秫杰鲡秫荛钽祯溴珧狃栝泱埙殇翳椒岔磔芾祜顼茆秫芾泸弩翕秫荟骈祆莒狎珏芾溴珧邋荟箅轲岔荃铞怙芾篚疱蝣轶矧篝屮荟箅轲卑眄芾翳弩轶溽翦苠钿糸綮屦徵妪ゥ泔瘗蜷玷疳珏荛骧芾泔瘗蜷玷纛雉殂遘厘眇豉茯屐狲苠祗荟箴徙濯苕殪忑莛狎茆彗轭沐铘弪芾泔瘗蜷玷纛雉殂苠钿沐铘弪苕茔戾狎疳珏磲脲糸綮ゥ优孟文疳珏茕彐茔镯黹趑邋疳珏茔戾狎滹踱戾疳珏荇栝箴徵弩豉戾屙痿茆彗轭沐铘弪茴蹯燔鲶腴辈眄芴烈桥茆芾糸綮妪苘郾俄磔芴狎珏茆芾狨翳矧苘郾俄磔芴狎珏芾溴珧邋苠钿沐铘弪荟箴徙濯苕殪忑荛胬黹邋茆彗轭沐铘弪芴狎珏荇屮纛矧磲禧芾筱栾镬苘郾弟忉箦扉铄箅轲荇屮纛矧磲禧芴狎珏芾翳弩轶溽翦苠钿沐铘弪苠祗荃铞怙芾篚疱蝣轶矧篝屮荟箴徙濯苕殪忑荃铞怙芾鲩鲠翦芾翳弩轶溽翦苕ゥ涉翳糸綮屦徵孱鲩蝻铐孱衄翳疳蜥珧狃箅轲轶轭骈铋翦禊ゥ篝蝈翥栳忪瀣箫殒秕戾狯忪犷扉铄忮赭邋扉铄翳狒秕ゥ麽铘箴徙忮赭邋瞵翳箴徙鏖祆篝蝈翥箫翳狒翳糸綮疳珏ゥ骈祆躔翳孱糸蝈疳珏茕彐荇轸戾疳珏茔戾狎滹踱戾疳珏茔孱翦蜷铉荇栝箴徵弩豉戾屙痿莛狎轭溴铘梆莛狎箅轲卑痿痨躞辨殪黹铛辨殪茕彐茆狍屐轭弩趄弭汨饼芾铒蝽犰箝遘鲡秫麸荟箝遘忡蝻躔荟怙麸归钴忡蝻躔ゥ澡茈弪畎痿瘐箬弩犷溴痿轭麸翳桢殓梏澡犷塍麸议汨狎郁镱瀹茕彐苠钿糸綮屦徵妍莛狎茈弪梆糗彗蝻躔荟篌苠珧秕疖沆遽蝠徵妪ゥ儒徜弪犷骘雉弪芤羼蹰蝈嗅汶徵妍驷钽桎螨莛徵弩豉戾驷钽ゥ义礤礅弪汨狃翦糸綮茯孱鬻泔眄犷潲茔栳痿弪磲螂郾茼狎脞雉棼１１ゥ渝泗轱铛礅弪犷糸綮茯孱鬻泔眄犷潲荏邈糸镱磲螂郾茼狎腧殓梏荛骖蹴茔荔邈铛礓屦翳拒荇桢箦泗轱钴苕１荛胬赭矬殇莒桢徜圮驷钽痨衢铥茯碥翳屦徵妪蓰苕犷泫痨衢铥荏燔蜷玷繇狎臊茔桢徜茯桢徜圮驷钽痨衢铥荏燔戾骠磲螂蓰苕犷泫痨衢铥茯碥翳屦徵妪莒骘雉茔骘雉苕犷泫痨衢铥茯碥翳屦徵妪茯骘雉苠祗莒桢徜苕犷泫痨衢铥荏燔殒镤滠憷疳珏茯殓梏磲螂苠祗遘戾骠磲螂苕辇茔桢徜茯桢徜圯苕犷泫痨衢铥茯碥翳屦徵妪莒骘雉茔骘雉苕犷泫痨衢铥茯碥翳屦徵妪茯骘雉苕茯孱鬻泔眄犷潲荑遽潋蹯鬻殇翳梆酏茯孱鬻泔眄犷潲苕镲趄蹯鬻殇翳梆酏茚滗麸戾铉翳荑遽滂彘玷酏爱叼酏荛胬黹彘茯孱鬻泔眄犷潲茔栳痿弪磲螂郾蓰茼狎脞雉棼１苕犷泫桢徜沆遽犰桢徜弪骈屐潴苕犷泫桢徜勖蓰莒彐繇狎臊苕犷泫骘雉沆遽犰骘雉弪骈屐潴苕犷泫骘雉勖蓰荇桢疳珏苕犷泫骘雉垡犀膛蓰苕ゥ汨犷珏麸蝈痫螋篝莒轭弩腴别茴矧磲祆轭弩腴别茱铄栳戽箴徙轭镱犷栳戽扉铄箴徙轭荏弭泔躅翦螓箦泐蹴溴痿椠除麸铛礅弪篚怏踱箦泗轱铙荏弭泔躅翦螓麸沅屦翳昌箦趔翳溴痿镦箦泗轱钺躅轸扉篝邃轭翳麸荏弭泔躅翦螓麸痤蹴忮螨饼磲轫蹴铛礅弪镦骒镝趔狒麸镦疳珏茯孱鬻泔眄犷潲荇镳骝徙糸镱爱庚磲轫蹴骝徙糸镱镦翳疳珏镢沲痖邃怡骒镝趔ゥ崎疳珏铛礅弪轭箫翳狒轸黠螂弼孱麒孱翳莛徵孱蹴忮蜷铉泔眄犷ゥ轶轭骈戾翳狒栳铒忮孱荛钽祯溴茕彐茔鲤徵孱蹴忮蜷铉狎徕殂茕彐芾疳珏铛礅弪轭纾丙茜溴孳翳屦徵妍茔箢犴溃避孱溷箢犴茔鲤徵妪茜溴孳憷疳珏铛礅弪轭琨１茕彐莛徵孱蹴忮蜷铉１茜祜忉燔憷疳珏芾铄芾疳珏铛礅弪轭琨１ゥ腮疱蝌彐芤羼蹰蝈嗅汶徵遨痄骠屮痄骛徵屐徕屐蟋怙镫磲螂蟋棂疱蜷钿屮棂疱蜴殓躜弩蓰棂疱蝌彐荛胬忉汶蝈骟芤羼蹰蝈嗅汶徵遨棂疱蝠徵弪彐蓰忉汶蝈纨茯孱鬻泔眄犷洫茆徙腧彐郾蓰荛胬痫螋蹒蹂茯孱鬻泔眄犷洫茆徙腧彐犰酏鄞蓰荛驺狍１茱苕镲纛雉弩辁瞄翎滹钺疖猃玳钺２苠祗苕镲纛雉弩辁瞄翎滹钺疖猃玳钺２苕茯孱鬻泔眄犷洫茆徙腧彐赭矬屦妣茯孱鬻泔眄犷洫茆徙腧彐灬篝箦瘕妣苠祗茯孱鬻泔眄犷洫茆徙腧彐犰酏鄞蓰荛驺狍１茱苕镲纛雉弩辁瞄翦镱疳珏２苠祗苕镲纛雉弩辁瞄翦镱疳珏２苕苕苕荛胬镱疳疱荑疱蝮弭躔痨衢铕徵弩芥犰箦痄骛徵屐狴秕艚娱铉戾嗅珏怙镫磲螂箫疱罱驷祗瀣怙镫磲螂箢蹴忮蝈浣趄蹂怛遽腱轭塍紧蝓瀣扉铍麸沭徵瀣泔祜蜢轭塍芥犰箦痄驸矧溴蚪苠祗荑疱蝮弭躔痨衢铕徵弩芥犰箦痄骛徵屐狴秕艚娱铉戾嗅珏怙镫磲螂箫疱罱驷祗瀣怙镫磲螂箢蹴忮蝈浣趄蹂怛遽腱轭塍紧蝓瀣扉铍麸沭徵瀣泔祜蜢轭塍紧蝓瀣扉铍泔祜蚪忪蹂躜煦镬矧解祯瀣汩翦泔祜蚪忪蹂犷汨矧泔祜蚪珧邋苕ゥ语礤盹蝈轭翦蝾犰泔眄犷潴茴鬻泔眄犷潲芰泗轹狒謇扉铄铒荛胬躞屐轭孱镘扉铄铛礅弪筌篦轸汨扉铄铛礅弪螵苕辇茴鬻泔眄犷潲芾郁狎粜蝈扉睚茔戾狎滹踱戾疳珏莛徵孱蹴忮蜷铉蝻磲铨荏弭泔躅翦螓疳珏饼莛徵弩豉戾驷钽ゥ砒翦蝾犰泔眄犷潴茴鬻泔眄犷潲苡翎螋嘛澌茔戾狎滹踱戾疳珏莛徵孱蹴忮蜷铉狎徕殂荏弭泔躅翦螓疳珏饼莛徵弩豉戾驷钽芰泗轹狒謇扉铄铒茴鬻孱鲩蝻铐孱酐序镬镧茼犭弭轸戾荛胬泔眄轸翦屦徵遘泔眄轸翦屦徵遘骈芾郁狎粜蝈扉碥忮玳铥箝铉戾箴徙妪苠钿箝铉戾箴徙妪ゥ祟秣溴珧邋ㄡ祺狴轭酗螋蹒蹂箦荛胬黹彘茕彗蝈妍湾篝蜥滹深翦珧徜屙蓬珏铊狎獒深骘蝽堙猃糸汜蔑眇豸彳沱泯荥猃稞苕荛胬黹邋茕彗蝈妍湾篝蜥滹深翦珧徜屙蓬珏铊狎獒澎弭蝻糗妪泐殂溴蔑眇豸徜矧弩苕ゥ语礤灬铉踽珏溴疱钿孱溴骈铋糸镱荛胬痫螋蹒蹂芤羼蹰蝈嗅汶徵妍轭溴铘骈蝮酏茴鬻泔眄犷潲芾郁狎裟镢茯孱鬻泔眄犷潲茚痧孱溟钺礤令屮稞荏弭泔躅翦螓疳珏除莛徵弩豉戾屙痿莛滏怙镫磲螂郯蓰熊猃玳钺溴绎篝稞轭轸茴鬻泔眄犷潲苄蜷铘麻恺郾蓰茯孱鬻泔眄犷潲茆殁钺礤义驽蜍摞妪钽獒簖荛胬铛礤蜷泸彐螗茆殁扉镧蜥痂篝戾躅篁舡痿苠祗濂荛胬犰痂狎彐螗茆殁扉镧蜥痂篝戾犰痂岘痿苠祗濂茆殁扉镧蜥痂篝戾痨衢铑狒痿苕楗苕楗茔戾狎滹踱戾疳珏莛栳铘镯箦泗轱睽茚滗泔铘孱趔扉铄麸泯汨狃翦螨义驽蜍摞妪钽獒簖茆彗轭箝铉戾箴徙妪茆殁扉镧蜥痂１苠钿箝铉戾箴徙妪茴鬻泔眄犷潲苄蜷铘深溴茔戾狎滹踱戾疳珏莛栳铘镯箦泗轱茯孱鬻泔眄犷潲荛钿屮钺礤堙升钿殂义黹篌轹稞茚滗泔铘孱趔扉铄麸泯汨狃翦螨堙升钿殂义黹篌轹稞茆彗轭箝铉戾箴徙妪莛蜷铘轭溴苠钿箝铉戾箴徙妪苠祗茴鬻泔眄犷潲芾郁狎裟镢荏弭泔躅翦螓疳珏除莛徵弩豉戾屙痿莛滏怙镫磲螂郯蓰乞镱嗅珏轭轸茴鬻泔眄犷潲苄蜷铘麻恺郾蓰茯孱鬻泔眄犷潲茆殁钺礤义驽蝈钽弩荛胬铛礤蜷泸彐螗茆殁扉镧蜥痂篝戾躅篁酏苠祗濂荛胬犰痂狎彐螗茆殁扉镧蜥痂篝戾犰痂猃苠祗濂茆殁扉镧蜥痂篝戾痨衢铑狒苕楗苕楗茔戾狎滹踱戾疳珏莛栳铘镯箦泗轱睽茚滗泔铘孱趔扉铄麸泯汨狃翦螨义驽蝈钽弩茆彗轭箝铉戾箴徙妪茆殁扉镧蜥痂１苠钿箝铉戾箴徙妪茴鬻泔眄犷潲苄蜷铘深溴茔戾狎滹踱戾疳珏莛栳铘镯箦泗轱睽茚滗泔铘孱趔扉铄麸泯汨狃翦螨深溴茆彗轭箝铉戾箴徙妪莛蜷铘轭溴苠钿箝铉戾箴徙妪苕语礤灬铉踽珏溴疱钿孱溴骈铋糸镱芰袈彗轭娘沲礤铘芾郁狎裟镢苠钿轭瘐